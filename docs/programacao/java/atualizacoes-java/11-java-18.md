# 1Ô∏è‚É£8Ô∏è‚É£ Java 18 (2022)

# üöÄ Java 18 - UTF-8 por Padr√£o e Servidor Web Simples

## üìñ Sobre o Java 18

Java 18 introduziu mudan√ßas importantes para **internacionaliza√ß√£o** com **UTF-8 como charset padr√£o**, eliminou inconsist√™ncias entre plataformas. Tamb√©m trouxe um **Simple Web Server** para desenvolvimento e **Code Snippets** melhorados em JavaDoc, al√©m de avan√ßos em **Vector API** e **Foreign Function & Memory API**.

## üí° O que s√£o JEPs?
Java 18 incluiu 9 JEPs focados em consist√™ncia multiplataforma, ferramentas de desenvolvimento e refinamento de APIs incubator.

---

## üåê Internacionaliza√ß√£o Padronizada

### üîπ JEP 400: UTF-8 por Padr√£o

#### ‚ùì O que √©?
UTF-8 se tornou o **charset padr√£o** para todas as opera√ß√µes de I/O, eliminando depend√™ncia do sistema operacional.

#### ‚ö†Ô∏è Por que √© importante?
Garante comportamento consistente entre diferentes plataformas e elimina problemas de encoding em aplica√ß√µes distribu√≠das.

```java
// UTF-8 por padr√£o no Java 18 - comportamento consistente
public class UTF8DefaultExample {
    
    // Antes do Java 18 - comportamento dependia do SO
    public static void beforeJava18() throws IOException {
        // No Windows: dependia da localiza√ß√£o (ex: Windows-1252)
        // No Linux: geralmente UTF-8
        // Comportamento inconsistente!
        Files.writeString(Path.of("before.txt"), "Ol√°, caf√© ‚òï");
    }
    
    // Java 18+ - sempre UTF-8 por padr√£o
    public static void afterJava18() throws IOException {
        // Sempre UTF-8, independente do sistema operacional
        String multilingualText = """
            English: Hello World!
            Portugu√™s: Ol√° Mundo!
            ‰∏≠Êñá: ‰Ω†Â•Ω‰∏ñÁïå!
            ÿßŸÑÿπÿ±ÿ®Ÿäÿ©: ŸÖÿ±ÿ≠ÿ®ÿß ÿ®ÿßŸÑÿπÿßŸÑŸÖ!
            Emoji: üåçüöÄ‚òïüéâ
            """;
        
        // Escrever arquivo - sempre UTF-8
        Files.writeString(Path.of("multilingual.txt"), multilingualText);
        
        // Ler arquivo - sempre UTF-8
        String content = Files.readString(Path.of("multilingual.txt"));
        System.out.println("Content: " + content);
        
        // FileWriter tamb√©m usa UTF-8 por padr√£o
        try (FileWriter writer = new FileWriter("output.txt")) {
            writer.write("Default charset: " + Charset.defaultCharset());
            writer.write("\n" + multilingualText);
        }
    }
    
    // Demonstra√ß√£o de caracteres problem√°ticos agora funcionando
    public static void demonstrateConsistency() throws IOException {
        String[] problematicStrings = {
            "Caf√© com a√ß√∫car",
            "na√Øve r√©sum√©", 
            "√ëo√±o espa√±ol",
            "‰Ω†Â•Ω‰∏ñÁïå",
            "üéâüöÄ‚òï"
        };
        
        for (String text : problematicStrings) {
            Path tempFile = Files.createTempFile("test", ".txt");
            
            Files.writeString(tempFile, text);
            String readBack = Files.readString(tempFile);
            
            boolean consistent = text.equals(readBack);
            System.out.printf("%-15s | Consistent: %s%n", 
                            text.substring(0, Math.min(text.length(), 15)), 
                            consistent ? "‚úÖ" : "‚ùå");
            
            Files.deleteIfExists(tempFile);
        }
    }
}

üìö **Saiba mais**: [UTF-8 Charset JEP](https://openjdk.org/jeps/400)

---

## üåê Ferramentas de Desenvolvimento

### üîπ JEP 408: Simple Web Server

#### ‚ùì O que √©?
Servidor HTTP simples e minimalista para prototipagem, testes ad-hoc e servir arquivos est√°ticos.

#### ‚ö†Ô∏è Por que √© importante?
Elimina depend√™ncias externas para tarefas simples de desenvolvimento e facilita testes locais.

```java
// Simple Web Server - uso b√°sico
public class SimpleWebServerExample {
    
    // Uso via linha de comando
    public static void commandLineUsage() {
        /*
        # Servir diret√≥rio atual na porta 8000
        jwebserver
        
        # Especificar porta e diret√≥rio
        jwebserver -p 9000 -d /path/to/directory
        
        # Bind espec√≠fico
        jwebserver -b 127.0.0.1 -p 8080
        */
    }
    
    // Servidor program√°tico
    public static void programmaticServer() throws IOException {
        var server = SimpleFileServer.createFileServer(
            new InetSocketAddress(8000),
            Path.of("."),
            SimpleFileServer.OutputLevel.VERBOSE
        );
        
        System.out.println("Server: http://localhost:8000");
        server.start();
        
        // Aguardar entrada para parar
        System.in.read();
        server.stop(0);
    }
    
    // Servidor para desenvolvimento SPA
    public static void developmentServer() throws IOException {
        Path webDir = Path.of("webapp");
        createWebApp(webDir);
        
        var server = SimpleFileServer.createFileServer(
            new InetSocketAddress(3000),
            webDir,
            SimpleFileServer.OutputLevel.INFO
        );
        
        System.out.println("Development server: http://localhost:3000");
        server.start();
        
        Runtime.getRuntime().addShutdownHook(new Thread(() -> {
            server.stop(0);
        }));
    }
    
    private static void createWebApp(Path webDir) throws IOException {
        Files.createDirectories(webDir);
        
        String html = """
            <!DOCTYPE html>
            <html>
            <head>
                <title>Java 18 Simple Web Server</title>
                <meta charset="UTF-8">
            </head>
            <body>
                <h1>üöÄ Java 18 Simple Web Server</h1>
                <p>UTF-8 support: Caf√© ‚òï ‰Ω†Â•Ω üåü</p>
                <script>
                    console.log('Java 18 development server running!');
                </script>
            </body>
            </html>
            """;
            
        Files.writeString(webDir.resolve("index.html"), html);
    }
}

üìö **Saiba mais**: [Simple Web Server JEP](https://openjdk.org/jeps/408)

---

## üìö Documenta√ß√£o Aprimorada

### üîπ JEP 413: Code Snippets em JavaDoc

#### ‚ùì O que √©?
Nova tag `@snippet` para incluir c√≥digo de exemplo em JavaDoc com syntax highlighting e valida√ß√£o.

#### ‚ö†Ô∏è Por que √© importante?
Melhora qualidade da documenta√ß√£o com exemplos validados e melhor apresenta√ß√£o.

```java
/**
 * Utility class demonstrating Java 18 features.
 * 
 * @since 18
 */
public class Java18Features {
    
    /**
     * Processes text files with UTF-8 default charset.
     * 
     * {@snippet :
     * // Read file with UTF-8 (default in Java 18+)
     * String content = Files.readString(Path.of("example.txt"));
     * 
     * // Process multilingual content
     * if (content.contains("caf√©")) {
     *     System.out.println("Found Portuguese content");
     * }
     * 
     * // Write with UTF-8 (default)
     * Files.writeString(Path.of("output.txt"), content.toUpperCase());
     * }
     * 
     * @param filePath the file path
     * @return processed content
     */
    public static String processFile(Path filePath) throws IOException {
        return Files.readString(filePath).trim().toUpperCase();
    }
    
    /**
     * Creates a development web server.
     * 
     * {@snippet :
     * // Create simple file server  
     * var server = SimpleFileServer.createFileServer(
     *     new InetSocketAddress(8000),     // @highlight substring="8000"
     *     Path.of("."),
     *     SimpleFileServer.OutputLevel.VERBOSE
     * );
     * 
     * server.start();                      // @highlight substring="start()"
     * System.out.println("Server started on http://localhost:8000");
     * }
     * 
     * @param port the server port
     * @return configured server
     */
    public static HttpServer createServer(int port) {
        // Implementation
        return null;
    }
    
    /**
     * Vector operations example.
     * 
     * {@snippet :
     * var species = FloatVector.SPECIES_256;
     * float[] a = {1, 2, 3, 4, 5, 6, 7, 8};
     * float[] b = {2, 3, 4, 5, 6, 7, 8, 9};
     * float[] result = new float[8];
     * 
     * var va = FloatVector.fromArray(species, a, 0);
     * var vb = FloatVector.fromArray(species, b, 0);
     * var vr = va.add(vb);               // @highlight substring="va.add(vb)"
     * vr.intoArray(result, 0);
     * }
     */
    public static void vectorExample() {
        // Implementation
    }
}

üìö **Saiba mais**: [Code Snippets JavaDoc JEP](https://openjdk.org/jeps/413)

---

## üöÄ Performance Melhorada

### üîπ JEP 417: Vector API (Segunda Incuba√ß√£o)

#### ‚ùì O que √©?
Segunda itera√ß√£o da Vector API com melhorias de performance e usabilidade.

```java
// Vector API melhorada no Java 18
import jdk.incubator.vector.*;

public class VectorAPI18 {
    
    private static final VectorSpecies<Float> SPECIES = FloatVector.SPECIES_PREFERRED;
    
    public static void basicOperations() {
        float[] a = {1, 2, 3, 4, 5, 6, 7, 8};
        float[] b = {2, 3, 4, 5, 6, 7, 8, 9};
        float[] result = new float[8];
        
        // Opera√ß√£o vetorizada
        var va = FloatVector.fromArray(SPECIES, a, 0);
        var vb = FloatVector.fromArray(SPECIES, b, 0);
        
        // Opera√ß√£o complexa: (a * b) + (a / 2) - 1
        var multiplication = va.mul(vb);
        var division = va.div(2.0f);
        var finalResult = multiplication.add(division).sub(1.0f);
        
        finalResult.intoArray(result, 0);
        
        System.out.println("Result: " + Arrays.toString(result));
    }
    
    public static void maskedOperations() {
        float[] data = {-5, 3, -2, 8, -1, 6, -4, 7};
        float[] result = new float[8];
        
        var vector = FloatVector.fromArray(SPECIES, data, 0);
        
        // M√°scara para valores positivos
        var positiveMask = vector.compare(VectorOperators.GT, 0.0f);
        
        // sqrt para positivos, abs para negativos
        var positiveResult = vector.lanewise(VectorOperators.SQRT, positiveMask);
        var negativeResult = vector.abs().blend(positiveResult, positiveMask);
        
        negativeResult.intoArray(result, 0);
        
        System.out.println("Masked result: " + Arrays.toString(result));
    }
}
```

---

## üéØ Impacto e Import√¢ncia

Java 18 trouxe consist√™ncia e ferramentas essenciais:

- ‚úÖ **UTF-8 padr√£o** eliminou inconsist√™ncias entre plataformas
- ‚úÖ **Simple Web Server** facilitou desenvolvimento local
- ‚úÖ **Code Snippets** melhoraram qualidade da documenta√ß√£o
- ‚úÖ **Vector API** evoluiu para melhor performance
- ‚úÖ **Foreign Memory API** avan√ßou interoperabilidade nativa

---

## üìÖ Informa√ß√µes da Vers√£o

- **üìÖ Lan√ßamento**: 22 de mar√ßo de 2022
- **üîß Tipo**: Feature Release
- **‚ö° Suporte**: Terminado em setembro de 2022
- **üéØ Status**: Consist√™ncia multiplataforma estabelecida
- **üîÑ Migra√ß√£o**: Simples - principalmente melhorias internas

---

## üîó Links √öteis

### üìö **Documenta√ß√£o Oficial**
- [Java 18 Documentation](https://docs.oracle.com/en/java/javase/18/)
- [Java 18 API Specification](https://docs.oracle.com/en/java/javase/18/docs/api/)
- [All JEPs in Java 18](https://openjdk.org/projects/jdk/18/)

### üåê **UTF-8 Default**
- [JEP 400: UTF-8 by Default](https://openjdk.org/jeps/400)
- [Charset Consistency Guide](https://www.baeldung.com/java-18-charset-utf8)

### üåê **Simple Web Server**
- [JEP 408: Simple Web Server](https://openjdk.org/jeps/408)
- [Simple Web Server Tutorial](https://www.baeldung.com/java-18-simple-web-server)
- [jwebserver Command Guide](https://docs.oracle.com/en/java/javase/18/docs/specs/man/jwebserver.html)

### üìö **Code Snippets**
- [JEP 413: Code Snippets in Java API Documentation](https://openjdk.org/jeps/413)
- [JavaDoc @snippet Tutorial](https://www.baeldung.com/java-18-javadoc-snippets)

### üöÄ **Vector API**
- [JEP 417: Vector API (Second Incubator)](https://openjdk.org/jeps/417)
- [Vector API Performance Guide](https://www.infoq.com/articles/java-vector-api-improvements/)

### üíª **Exemplos e Pr√°ticas**
- [Java 18 Features Guide](https://www.baeldung.com/java-18-new-features)
- [Java 18 Migration Tips](https://blog.codefx.org/java/java-18-guide/)
- [Modern Java Development](https://github.com/openjdk/jdk18) 