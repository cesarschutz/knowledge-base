# 1Ô∏è‚É£2Ô∏è‚É£ Java 12 (2019)

# üöÄ Java 12 - Switch Expressions Preview

## üìñ Sobre o Java 12

Java 12 continuou o ciclo de releases de 6 meses, introduzindo **Switch Expressions** como preview feature e v√°rias melhorias incrementais que pavimentaram o caminho para funcionalidades mais robustas nas vers√µes futuras.

## üí° O que s√£o JEPs?
Java 12 incluiu 8 JEPs, focando principalmente em preview features e melhorias de performance e usabilidade.

---

## üéØ Melhorias na Linguagem

### üîπ JEP 325: Switch Expressions (Preview)

#### ‚ùì O que √©?
Nova sintaxe para switch que permite retornar valores diretamente, usando `->` e eliminando fall-through acidental.

#### ‚ö†Ô∏è Por que √© importante?
Elimina bugs comuns de switch tradicional (esquecer break), torna c√≥digo mais expressivo e permite usar switch como express√£o funcional.

```java
// Switch tradicional - verboso e propenso a bugs
String getSeasonOld(int month) {
    String season;
    switch (month) {
        case 12:
        case 1:
        case 2:
            season = "Winter";
            break;
        case 3:
        case 4:
        case 5:
            season = "Spring";
            break;
        case 6:
        case 7:
        case 8:
            season = "Summer";
            break;
        case 9:
        case 10:
        case 11:
            season = "Fall";
            break;
        default:
            throw new IllegalArgumentException("Invalid month: " + month);
    }
    return season;
}

// Java 12 - Switch Expression (mais limpo)
String getSeason(int month) {
    return switch (month) {
        case 12, 1, 2 -> "Winter";
        case 3, 4, 5 -> "Spring";
        case 6, 7, 8 -> "Summer";
        case 9, 10, 11 -> "Fall";
        default -> throw new IllegalArgumentException("Invalid month: " + month);
    };
}

// Casos mais complexos com yield (Java 13+)
int calculateDays(String month, boolean isLeapYear) {
    return switch (month.toLowerCase()) {
        case "january", "march", "may", "july", "august", "october", "december" -> 31;
        case "april", "june", "september", "november" -> 30;
        case "february" -> isLeapYear ? 29 : 28;
        default -> throw new IllegalArgumentException("Invalid month: " + month);
    };
}

// Switch com processamento complexo
String processGrade(char grade) {
    return switch (grade) {
        case 'A', 'a' -> "Excellent";
        case 'B', 'b' -> "Good";
        case 'C', 'c' -> "Average";
        case 'D', 'd' -> "Below Average";
        case 'F', 'f' -> "Fail";
        default -> "Invalid grade: " + grade;
    };
}
```

#### üéØ Diferen√ßas Switch Tradicional vs Expression

```java
// Tradicional: statement (executa a√ß√µes)
switch (status) {
    case ACTIVE:
        enableFeatures();
        sendNotification();
        break;
    case INACTIVE:
        disableFeatures();
        break;
}

// Expression: retorna valor
String message = switch (status) {
    case ACTIVE -> "User is active";
    case INACTIVE -> "User is inactive";
    case SUSPENDED -> "User is suspended";
};

// H√≠brido: pode fazer ambos no Java 14+
String result = switch (operation) {
    case ADD -> {
        logger.info("Performing addition");
        yield a + b;
    }
    case SUBTRACT -> {
        logger.info("Performing subtraction");
        yield a - b;
    }
};
```

üìö **Saiba mais**: [Switch Expressions JEP](https://openjdk.org/jeps/325)

---

## üìù String Enhancements

### üîπ JEP 326: Raw String Literals (Removed)

#### ‚ùì O que era?
Raw String Literals foram inicialmente propostas para Java 12 mas removidas antes do lan√ßamento devido a feedback da comunidade.

### üîπ Novos M√©todos String

#### ‚ùì O que √©?
Dois novos m√©todos √∫teis adicionados √† classe String para manipula√ß√£o comum.

#### ‚ö†Ô∏è Por que √© importante?
Simplifica opera√ß√µes comuns de formata√ß√£o e transforma√ß√£o de strings.

```java
// indent() - adiciona indenta√ß√£o a cada linha
String code = """
    public class Example {
        public void method() {
            System.out.println("Hello");
        }
    }
    """;

String indented = code.indent(4);
// Adiciona 4 espa√ßos a cada linha

// Exemplo pr√°tico: formata√ß√£o de c√≥digo
public String formatJavaCode(String code, int indentLevel) {
    return code.lines()
        .map(line -> " ".repeat(indentLevel) + line)
        .collect(Collectors.joining("\n"));
}

// transform() - aplica fun√ß√£o de transforma√ß√£o
String greeting = "hello world";

// Aplicar m√∫ltiplas transforma√ß√µes
String result = greeting
    .transform(String::toUpperCase)        // "HELLO WORLD"
    .transform(s -> s.replace(" ", "_"))   // "HELLO_WORLD"
    .transform(s -> "[" + s + "]");        // "[HELLO_WORLD]"

// Exemplo pr√°tico: pipeline de transforma√ß√£o
public String processUserInput(String input) {
    return input
        .transform(String::trim)           // Remove espa√ßos
        .transform(String::toLowerCase)    // Min√∫sculas
        .transform(this::removeSpecialChars) // Remove caracteres especiais
        .transform(this::validateFormat);  // Valida formato
}

// Compara√ß√£o com abordagem tradicional
// Antes:
String processed = validateFormat(
    removeSpecialChars(
        input.trim().toLowerCase()
    )
);

// Com transform() - mais fluente
String processed = input
    .transform(String::trim)
    .transform(String::toLowerCase)
    .transform(this::removeSpecialChars)
    .transform(this::validateFormat);
```

---

## üóëÔ∏è Garbage Collection

### üîπ JEP 189: Shenandoah GC (Experimental)

#### ‚ùì O que √©?
Garbage collector experimental focado em baixa lat√™ncia, desenvolvido pela Red Hat.

#### ‚ö†Ô∏è Por que √© importante?
Oferece pause times consistentemente baixos independente do tamanho do heap, concurrent com a aplica√ß√£o.

```bash
# Ativar Shenandoah (experimental)
java -XX:+UnlockExperimentalVMOptions \
     -XX:+UseShenandoahGC \
     MyApplication

# Caracter√≠sticas do Shenandoah:
# - Pause times < 10ms
# - Concurrent compaction
# - Independent of heap size
# - Good for low-latency applications
```

### üîπ JEP 346: Promptly Return Unused Committed Memory from G1

#### ‚ùì O que √©?
Melhoria no G1GC para retornar mem√≥ria n√£o utilizada ao sistema operacional mais rapidamente.

#### ‚ö†Ô∏è Por que √© importante?
Reduz footprint de mem√≥ria em aplica√ß√µes com padr√µes de uso vari√°veis, especialmente √∫til em containers.

```bash
# G1GC retorna mem√≥ria unused automaticamente
java -XX:+UseG1GC \
     -XX:G1PeriodicGCInterval=5000 \
     MyApplication
```

---

## üöÄ JVM e Performance

### üîπ JEP 230: Microbenchmark Suite

#### ‚ùì O que √©?
Adiciona JMH (Java Microbenchmark Harness) como parte do c√≥digo fonte OpenJDK.

#### ‚ö†Ô∏è Por que √© importante?
Facilita cria√ß√£o de benchmarks precisos e consistentes para medir performance de c√≥digo Java.

```java
// Exemplo de microbenchmark
@BenchmarkMode(Mode.Throughput)
@State(Scope.Benchmark)
public class StringConcatBenchmark {
    
    @Param({"10", "100", "1000"})
    private int size;
    
    @Benchmark
    public String stringConcat() {
        String result = "";
        for (int i = 0; i < size; i++) {
            result += "test";
        }
        return result;
    }
    
    @Benchmark
    public String stringBuilder() {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < size; i++) {
            sb.append("test");
        }
        return sb.toString();
    }
}
```

### üîπ JEP 334: JVM Constants API

#### ‚ùì O que √©?
API para modelar key nominal descriptors para class-file e run-time artifacts.

#### ‚ö†Ô∏è Por que √© importante?
Melhora performance e facilita tools que analisam ou geram bytecode.

---

## üîß Outras Melhorias

### üîπ JEP 344: Abortable Mixed Collections for G1

#### ‚ùì O que √©?
Permite abortar mixed garbage collections no G1 se excederem pause time target.

### üîπ Default CDS Archives

#### ‚ùì O que √©?
Arquivos CDS s√£o criados por padr√£o durante build, melhorando startup time.

```bash
# CDS √© usado automaticamente se dispon√≠vel
java MyApplication  # Startup mais r√°pido com CDS
```

---

## üéØ Impacto e Prepara√ß√£o

Java 12 foi importante para **preparar o terreno**:

- ‚úÖ **Switch Expressions** preview mostrou dire√ß√£o da linguagem
- ‚úÖ **Shenandoah GC** trouxe nova op√ß√£o para baixa lat√™ncia
- ‚úÖ **String enhancements** continuaram melhorando APIs
- ‚úÖ **Performance improvements** com CDS e G1 melhorias
- ‚úÖ **Microbenchmarks** padronizaram testes de performance

---

## üìÖ Informa√ß√µes da Vers√£o

- **üìÖ Lan√ßamento**: 19 de mar√ßo de 2019
- **üîß Tipo**: Feature Release
- **‚ö° Suporte**: Terminado em setembro de 2019
- **üéØ Status**: Preview features importantes (Switch Expressions)
- **üîÑ Migra√ß√£o**: Simples - principalmente additive features

---

## üîó Links √öteis

### üìö **Documenta√ß√£o Oficial**
- [Java 12 Documentation](https://docs.oracle.com/en/java/javase/12/)
- [Java 12 API Specification](https://docs.oracle.com/en/java/javase/12/docs/api/)
- [All JEPs in Java 12](https://openjdk.org/projects/jdk/12/)

### üéØ **Switch Expressions**
- [JEP 325: Switch Expressions](https://openjdk.org/jeps/325)
- [Switch Expression Examples](https://www.baeldung.com/java-switch)
- [Preview Features Guide](https://openjdk.org/jeps/12)

### üóëÔ∏è **Garbage Collection**
- [Shenandoah GC](https://openjdk.org/jeps/189)
- [G1 Improvements](https://openjdk.org/jeps/346)
- [GC Comparison Guide](https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/)

### üíª **Exemplos e Pr√°ticas**
- [Java 12 Features Guide](https://www.baeldung.com/java-12-new-features)
- [Switch Expressions Tutorial](https://mkyong.com/java/java-12-switch-expressions/)
- [JMH Microbenchmarks](http://tutorials.jenkov.com/java-performance/jmh.html) 