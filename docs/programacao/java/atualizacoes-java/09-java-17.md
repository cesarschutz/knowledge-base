# 1️⃣7️⃣ Java 17 LTS (2021)

## 🚀 Java 17 - A LTS Moderna e Estável

Java 17 é atualmente a versão LTS mais adotada para novos projetos, oferecendo excelente equilíbrio entre estabilidade e recursos modernos.

---

## ⭐ Principais Novidades

### 🔹 Sealed Classes (Final)

#### ❓ O que é?
Classes que controlam quais outras classes podem estendê-las, oferecendo melhor modelagem de domínio.

#### 💡 Exemplo Simples
```java
// Classe selada - só Shape, Circle e Rectangle podem estender
public sealed class Shape 
    permits Circle, Rectangle, Triangle {
    
    public abstract double area();
}

// Classes permitidas
public final class Circle extends Shape {
    private final double radius;
    
    public Circle(double radius) { this.radius = radius; }
    
    public double area() { return Math.PI * radius * radius; }
}

public final class Rectangle extends Shape {
    private final double width, height;
    
    public Rectangle(double width, double height) {
        this.width = width;
        this.height = height;
    }
    
    public double area() { return width * height; }
}

// Esta classe NÃO COMPILA - não está na lista permits
public class Square extends Shape { } // ERRO!
```

### 🔹 Pattern Matching for instanceof

#### ❓ O que é?
Simplifica verificações de tipo e casting, reduzindo código boilerplate.

#### 💡 Exemplo Simples
```java
// Antes do Java 17
public String processObject(Object obj) {
    if (obj instanceof String) {
        String str = (String) obj;  // casting manual
        return str.toUpperCase();
    } else if (obj instanceof Integer) {
        Integer num = (Integer) obj;  // casting manual
        return "Number: " + num;
    }
    return "Unknown";
}

// Java 17 - Pattern Matching
public String processObject(Object obj) {
    if (obj instanceof String str) {      // casting automático
        return str.toUpperCase();
    } else if (obj instanceof Integer num) {  // casting automático
        return "Number: " + num;
    }
    return "Unknown";
}
```

### 🔹 Records (Final)

#### ❓ O que é?
Classes compactas para dados imutáveis, eliminando boilerplate de getters, equals, hashCode, toString.

#### 💡 Exemplo Simples
```java
// Record simples
public record Person(String name, int age) {}

// Uso
Person person = new Person("João", 30);
System.out.println(person.name());  // João
System.out.println(person.age());   // 30
System.out.println(person);         // Person[name=João, age=30]

// Record com validação
public record Product(String name, double price) {
    public Product {
        if (price < 0) {
            throw new IllegalArgumentException("Preço não pode ser negativo");
        }
    }
}

// Record com métodos customizados
public record Point(int x, int y) {
    public double distanceFromOrigin() {
        return Math.sqrt(x * x + y * y);
    }
}
```

### 🔹 Text Blocks (Final)

#### ❓ O que é?
Strings multilinha sem necessidade de escape, ideais para JSON, SQL, HTML.

#### 💡 Exemplo Simples
```java
// Antes - difícil de ler e manter
String json = "{\n" +
              "  \"name\": \"João\",\n" +
              "  \"age\": 30,\n" +
              "  \"city\": \"São Paulo\"\n" +
              "}";

// Java 17 - Text Blocks
String json = """
    {
      "name": "João",
      "age": 30,
      "city": "São Paulo"
    }
    """;

// SQL mais legível
String sql = """
    SELECT p.name, p.age, c.name as city
    FROM person p
    JOIN city c ON p.city_id = c.id
    WHERE p.age > 18
    ORDER BY p.name
    """;
```

### 🔹 Switch Expressions (Final)

#### ❓ O que é?
Switch como expressão que retorna valor, com sintaxe mais concisa.

#### 💡 Exemplo Simples
```java
// Switch clássico
public String getDayTypeOld(String day) {
    String result;
    switch (day) {
        case "MONDAY":
        case "TUESDAY":
        case "WEDNESDAY":
        case "THURSDAY":
        case "FRIDAY":
            result = "Weekday";
            break;
        case "SATURDAY":
        case "SUNDAY":
            result = "Weekend";
            break;
        default:
            result = "Invalid";
    }
    return result;
}

// Java 17 - Switch Expression
public String getDayType(String day) {
    return switch (day) {
        case "MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY" -> "Weekday";
        case "SATURDAY", "SUNDAY" -> "Weekend";
        default -> "Invalid";
    };
}
```

### 🔹 Stream.toList()

#### ❓ O que é?
Método conveniente para coletar Stream em List imutável.

#### 💡 Exemplo Simples
```java
List<String> names = List.of("ana", "joão", "maria");

// Antes do Java 17
List<String> upperNames = names.stream()
    .map(String::toUpperCase)
    .collect(Collectors.toList());

// Java 17 - mais simples
List<String> upperNames = names.stream()
    .map(String::toUpperCase)
    .toList();  // retorna lista imutável
```

---

## 🔧 Outras Melhorias Importantes

### ⚡ Performance
- **macOS Metal rendering**: Melhor performance gráfica no macOS
- **New macOS rendering pipeline**: Renderização nativa
- **Foreign Function & Memory API** (Incubator): Acesso nativo mais seguro

### 🛠️ Ferramentas
- **jpackage**: Criar instaladores nativos
- **Strongly Encapsulate JDK Internals**: Maior segurança

---

## 🎯 Por que Java 17 é Especial?

- **LTS Moderna**: Primeira LTS com Records, Sealed Classes, Pattern Matching
- **Estabilidade Comprovada**: 3+ anos de uso em produção
- **Padrão da Indústria**: Escolha preferida para novos projetos
- **Recursos Modernos**: Sintaxe concisa e expressiva
- **Performance Excelente**: Otimizações significativas

---

## 📅 Informações da Versão

- **📅 Lançamento**: Setembro de 2021
- **🔧 Tipo**: LTS (Long Term Support)
- **⚡ Suporte**: Até 2029+
- **🎯 Status**: Recomendado para novos projetos

---

## 🔗 Links Úteis

- [Oracle Java 17 Documentation](https://docs.oracle.com/en/java/javase/17/)
- [Migration Guide to Java 17](https://docs.oracle.com/en/java/javase/17/migrate/index.html)
- [Java 17 Records Tutorial](https://www.baeldung.com/java-record-keyword)
- [Sealed Classes Guide](https://www.baeldung.com/java-sealed-classes-interfaces) 